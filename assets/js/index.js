(function(){var e,n,t,o,r,a,i,s,u,d,l,c,g,f,m,p,w;c=[1,"assets/img/Pixel Art.png","https://pbs.twimg.com/media/CERI-yNW0AIwIA6.jpg:large","https://pbs.twimg.com/media/CDGwAolWIAA-xkF.jpg:large","https://pbs.twimg.com/media/CEe1sRkWYAE0Wiy.jpg:large","https://pbs.twimg.com/media/CGGc8fnWMAA0GnY.jpg:large","https://pbs.twimg.com/media/CeBLo6ZWIAQE_Qn.jpg:large","https://pbs.twimg.com/media/Cgf7-IEUEAAgWk5.jpg:large","https://pbs.twimg.com/media/Ci-4rIQWgAABok3.jpg:large"],t=function(e){return $(".keys").append('<div class="key"> '+e+" </div>").removeClass("hidden")},p=function(){return $(".keys").find(".key").addClass("bye"),setTimeout(function(){return $(".keys").addClass("hidden").empty()},300)},cheet.onfail=p,cheet.onnext=function(e,n){return"space"===n&&(n=" "),t(n)},cheet.ondone=function(){return setTimeout(function(){return p()},1e3)},u=function(e,n){return cheet.add(e).then(n)},u("↑ ↑ ↓ ↓ ← → ← → b a",function(){return c[0]=(c[0]+1)%c.length,0===c[0]&&(c[0]=1),$(".profile_img img").attr("src",c[c[0]])}),u("f i l l space d e space p u t a",function(){return alert("Com goses insultarme? Fill de meuca, al infern aniràs...")}),u("a r o u n d space t h e space w o r l d",function(){return f("atw")}),u("i n t e r s t e l l a r",function(){return f("stay")}),u("s a t u r d a y space n i g h t space f e v e r",function(){return f(Math.round(Math.random())?"staying alive":"staying alive2")}),u("d o space a space b a r r e l space r o l l",function(){return $("body").addClass("barrel-roll"),setTimeout(function(){return $("body").removeClass("barrel-roll")},4e3)}),u("f l i p space i t",function(){return $("body").hasClass("flip")?($("body").removeClass("flip").addClass("iflip"),setTimeout(function(){return $("body").removeClass("iflip")},2e3)):$("body").addClass("flip")}),u("w t f s t b",function(){return f("when-the-fire-starts-to-burn")}),u("o s c u r o",function(){return localStorage.darkmode?(localStorage.removeItem("darkmode"),$("body").removeClass("darkmode").removeClass("darkmode-inmediate")):(localStorage.darkmode="true",$("body").addClass("darkmode"))}),r=function(){var e,n,t;return n=new Date,t=new Date(8300376e5),e=n.getMonth()>t.getMonth()||n.getMonth()===t.getMonth()&&n.getDate()>=t.getDate()?n.getYear()-t.getYear():n.getYear()-t.getYear()-1,$("#año").text(e)},r(),window.soundBuffers=w={},window.AudioContext=window.AudioContext||window.mozAudioContext||window.webkitAudioContext,window.audioCtx=o=new AudioContext,window.soundAnalyser=o.createAnalyser(),soundAnalyser.maxDecibels=-5,m=null,s=$("#background")[0].getContext("2d"),soundAnalyser.connect(o.destination),n=new Audio,i={m4a:n.canPlayType("audio/m4a")||n.canPlayType("audio/x-m4a")||n.canPlayType("audio/aac"),mp3:n.canPlayType("audio/mp3")||n.canPlayType("audio/mpeg;"),ogg:n.canPlayType('audio/ogg; codecs="vorbis"'),wav:n.canPlayType('audio/wav; codecs="1"')};for(a in i)i[a]&&(i.def=a);g=function(e,n,t){var r,a;if(1===arguments.length)r="/assets/snd/"+e+"."+i.def;else if(2===arguments.length)r=n;else{if(3!==arguments.length)return void console.error("Demasiados argumentos para loadSound. No se hace nada");if(i[n])r="/assets/snd/"+e+"."+n;else{if(!i[t])throw"No se puede reproducir en ningún formato";r="/assets/snd/"+e+"."+t}}return a=new XMLHttpRequest,a.open("GET",r),a.responseType="arraybuffer",a.onload=function(n){return o.decodeAudioData(a.response,function(n){return w[e]=n})},a.onerror=function(e){return console.error("El archivo "+r+" no existe")},a.send()},f=function(e){var n,t;return n=w[e],n?(o.resume(),t=o.createBufferSource(),t.buffer=n,t.connect(soundAnalyser),$("#background").removeClass("nope"),setTimeout(function(){return t.start(0),Math.round(1e3*Math.random())%2?d():l(),console.log("Reproduciendo "+e)},100),t.onended=function(){return t.onended=null,$("#background").addClass("noping"),console.log("Fin de "+e),setTimeout(function(){return cancelAnimationFrame(m),m=null,$("#background").removeClass("noping").addClass("nope"),o.suspend()},500)}):window.alert("Buffer is null or undefined")},l=function(){var e,n,t,o,r;return r=function(){return $("#background")[0].width},o=function(){return $("#background")[0].height},soundAnalyser.fftSize=2048,e=soundAnalyser.frequencyBinCount,n=new Uint8Array(e),s.clearRect(0,0,r(),o()),(t=function(){var a,i,u,d,l,c,g;for(m=requestAnimationFrame(t),soundAnalyser.getByteTimeDomainData(n),s.fillStyle="rgb(255, 255, 255)",s.fillRect(0,0,r(),o()),s.lineWidth=4,s.strokeStyle="#3f51b5",s.beginPath(),d=1*r()/e,c=0,a=i=0,u=e;u>=0?u>=i:i>=u;a=u>=0?++i:--i)l=n[a]/128,g=l*o()/2,0===a?s.moveTo(c,g):s.lineTo(c,g),c+=d;return s.lineTo(r(),o()/2),s.stroke()})()},d=function(){var e,n,t,o,r;return r=function(){return $("#background")[0].width},o=function(){return $("#background")[0].height},soundAnalyser.fftSize=512,e=soundAnalyser.frequencyBinCount,n=new Uint8Array(e),s.clearRect(0,0,r(),o()),(t=function(){var a,i,u,d,l,c,g;for(m=requestAnimationFrame(t),soundAnalyser.getByteFrequencyData(n),s.fillStyle="rgb(255, 255, 255)",s.fillRect(0,0,r(),o()),i=r()/e*2.5,g=0,c=[],u=d=0,l=e;l>=0?l>=d:d>=l;u=l>=0?++d:--d)a=o()*n[u]/256,s.fillStyle="#3f51b5",s.fillRect(g,o()-a,i,a),c.push(g+=i+1);return c})()},e=function(){var e,n,t;return n=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,e=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1,t/e},e=e(),g("atw","mp3","ogg"),g("stay","m4a","ogg"),g("staying alive","m4a","ogg"),g("staying alive2","m4a","ogg"),g("when-the-fire-starts-to-burn","m4a","ogg"),$(".profile_img img").load(function(){return $(this).css("margin-top",(256-$(this).height())/2+"px")}),new Hammer(document.querySelector(".profile_img img")).on("press",function(e){return c[0]=(c[0]+1)%c.length,0===c[0]&&(c[0]=1),$(".profile_img img").attr("src",c[c[0]])}),$(window).resize(function(){return $("#background").width($(window).width()).height($(window).height()),a=$("#background")[0],a.width=$(window).width()*e,a.height=$(window).height()*e}),$(window).resize()}).call(this);